<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="&lt;no title&gt;" href="10-dask.html" /><link rel="prev" title="GitLab" href="08-gitlab.html" />

    <meta name="generator" content="sphinx-4.5.0, furo 2022.06.04"/>
        <title>Pipelines - GEOAnalytics Canada</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=40978830699223671f4072448e654b5958f38b89" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">GEOAnalytics Canada</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/geoanalytics-icon.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">GEOAnalytics Canada</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Getting Started</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="02-geospatial-python.html"><strong>Working with Earth Observation data in Python</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="03-jupyter-notebooks.html"><strong>Jupyter Notebooks</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="04-authentication.html"><strong>Authentication</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="05-desktop-vm.html"><strong>Desktop VM’s</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="06-file-browser.html"><strong>File Browser</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="07-stac.html"><strong>SpatioTemporal Asset Catalog (STAC)</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="08-gitlab.html"><strong>GitLab</strong></a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#"><strong>Pipelines</strong></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../2_real_world_examples/index.html">Real World Examples</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../2_real_world_examples/01-accessing-data.html"><strong>Accessing and Downloading Data</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../2_real_world_examples/02-ndvi-with-dask.html"><strong>NDVI With Dask</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../2_real_world_examples/03-ndsi-with-dask.html">1. Initialize your Dask Gateway Clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2_real_world_examples/03-ndsi-with-dask.html#2.-Getting-the-MODIS-Data">2. Getting the MODIS Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2_real_world_examples/03-ndsi-with-dask.html#3.-Calculating-the-NDSI">3. Calculating the NDSI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2_real_world_examples/03-ndsi-with-dask.html#4.-Visualizing-the-Results">4. Visualizing the Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2_real_world_examples/04-ndwi-with-dask.html"><strong>NDWI With Dask</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../2_real_world_examples/05-change-detection.html"><strong>Change Detection</strong></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../3_scientific_workflows/index.html">Scientific Workflows</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../3_scientific_workflows/01-flnro-esque-pipeline.html"><strong>Daily NDSI Average Pipeline</strong></a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<section id="Pipelines">
<h1><strong>Pipelines</strong><a class="headerlink" href="#Pipelines" title="Permalink to this headline">#</a></h1>
<section id="1.-Basics-of-the-GEOAnalytics-Kubeflow-Pipelines">
<h2>1. Basics of the GEOAnalytics Kubeflow Pipelines<a class="headerlink" href="#1.-Basics-of-the-GEOAnalytics-Kubeflow-Pipelines" title="Permalink to this headline">#</a></h2>
<p>Kubeflow Pipelines is a platform that provides tools for developing and building portable, scalable machine learning (ML) workflows based on Docker containers.</p>
<p><strong>The Kubeflow Pipelines platform consists of:</strong></p>
<ul class="simple">
<li><p>A UI for managing and tracking pipelines and their execution</p></li>
<li><p>An engine for scheduling a pipeline’s execution</p></li>
<li><p>An SDK for defining, building, and deploying pipelines in Python</p></li>
</ul>
<p>A pipeline is a representation of a ML workflow containing the parameters required to run the pipeline and the inputs and outputs of each component. Each pipeline component is a self-contained code block, packaged as a Docker image.</p>
<p>In this tutorial notebook, we will build our first Kubeflow Pipelines with Python functions converted to container components and with Docker images. First, run the following command to install all the packages and dependencies required for this tutorial. The requirements.txt file contains the Kubeflow Pipelines SDK and <code class="docutils literal notranslate"><span class="pre">lxml</span></code> (a Python library which allows for easy handling of XML and HTML files, and can also be used for web scraping).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>! pip install -r data/requirements.txt
</pre></div>
</div>
</div>
</section>
<section id="2.-Building-Pipelines-in-Jupyterhub">
<h2>2. Building Pipelines in Jupyterhub<a class="headerlink" href="#2.-Building-Pipelines-in-Jupyterhub" title="Permalink to this headline">#</a></h2>
<p>In this section we will connect to the GEOAnalytics Kubeflow Client where our Pipeline will be uploaded, and create, compile, and run a simple ‘Hello World!’ pipeline.</p>
<p>A regular pattern for building pipelines in Kubeflow Pipelines is:</p>
<ol class="arabic simple">
<li><p>Define components for each task</p></li>
<li><p>Stitch the components in a <code class="docutils literal notranslate"><span class="pre">&#64;dsl.pipeline</span></code> decorated function</p></li>
<li><p>Compile the pipeline, upload the YAML file, and run the pipeline.</p></li>
</ol>
<p>This pattern lets you define portable components that can be individually tested before combining them into a full pipeline.</p>
<p><strong>Important Note: The Kubeflow platform provides Jupyter Notebook Servers for using the SDK and pipeline execution, but please DO NOT create a pipeline from these server notebooks.</strong></p>
<section id="2.1-Connect-to-GEOAnalytics-Kubeflow-Client¶">
<h3>2.1 Connect to GEOAnalytics Kubeflow Client¶<a class="headerlink" href="#2.1-Connect-to-GEOAnalytics-Kubeflow-Client¶" title="Permalink to this headline">#</a></h3>
<p>The first step is to get connected with the the Kubeflow Client in GEOAnalytics Canada.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>### GEOAnalyticsKubeflowClient
import requests
import kfp
import json
import logging
import getpass

from lxml import html

#from auth_providers.DexProvider import DexProvider

class GEOAnalyticsKubeflowClient:
    def __init__(self, username, password, auth_provider, namespace=None):
        self.logger = None
        self._initialize_logger()

        self.client = None
        self.namespace = username if namespace is None else namespace

        self._authenticate(username, password, auth_provider)
        self._validate_client_connection()

    def _initialize_logger(self):
        logging.basicConfig(format=&#39;%(asctime)s %(levelname)s (%(name)s): %(message)s&#39;, level=logging.INFO, datefmt=&#39;%Y-%m-%d %H:%M:%S&#39;)
        self.logger = logging.getLogger(&quot;GEOAnalyticsKubeflowClient&quot;)

    # https://github.com/kubeflow/kfctl/issues/140#issuecomment-719894529
    def _authenticate(self, username, password, auth_provider):
        session = requests.Session()
        response = session.get(auth_provider.host)
        headers = {
            &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;,
        }

        data = auth_provider.get_auth_data_dict(username, password)
        post_url = auth_provider.get_auth_post_url(response)
        session.post(post_url, headers=headers, data=data)
        try:
            session_cookie = session.cookies.get_dict()[&quot;authservice_session&quot;]
        except Exception as e:
            message = &quot;invalid host or credentials&quot;
            self.logger.error(message)
            raise Exception(message) from None

        self.client = kfp.Client(
            host=f&quot;{auth_provider.host}/pipeline&quot;,
            cookies=f&quot;authservice_session={session_cookie}&quot;,
            namespace=self.namespace,
        )


    def _validate_client_connection(self):
        if self.client.list_pipelines().total_size &gt; 0:
            self.logger.info(&quot;successfully authenticated with kubeflow&quot;)
        else:
            message = &quot;unable to validate kubeflow client connection. listing pipelines failed.&quot;
            self.logger.error(message)
            raise Exception(message)
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>class DexProvider:
    def __init__(self, host):
        self.host = host
        self.name = &quot;dex&quot;

    def get_auth_data_dict(self, username, password):
        return {&quot;login&quot;: username, &quot;password&quot;: password}

    def get_auth_post_url(self, initial_response):
        return initial_response.url

    def get_provider_name(self):
        return self.name
<br/></pre></div>
</div>
</div>
<p>The following cell block takes in the URL to the GEOAnalytics Kubeflow server as the provider and requires you to enter your GEOAnalytics Canada username and password to gain authentication.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>provider = DexProvider(&quot;http://kubeflow.geoanalytics.ca&quot;)
kubeflow_client = GEOAnalyticsKubeflowClient(input(&quot;Username: &quot;), getpass.getpass(), provider)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Username:  asaini
 ············
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2021-06-25 21:54:16 INFO (GEOAnalyticsKubeflowClient): successfully authenticated with kubeflow
</pre></div></div>
</div>
<p>Now that we are authenticated, let’s build our pipelines. There are two ways components of a pipeline can be generated: Using python functions or using docker images. We will create two pipelines experimenting with both these methods.</p>
</section>
<section id="2.2-Building-Pipelines-through-Python-Function-Based-Components">
<h3>2.2 Building Pipelines through Python Function Based Components<a class="headerlink" href="#2.2-Building-Pipelines-through-Python-Function-Based-Components" title="Permalink to this headline">#</a></h3>
<ol class="arabic simple">
<li><p><strong>Define a standard python function</strong>: For our example, the function will combine two separate strings together. The function should not use any code declared outside of the function definition and helper function must be declared within the function. The input and output data type should also be explicitly declared.</p></li>
</ol>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import kfp
import kfp.dsl as dsl
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Combine two strings together
def combine(a: str, b: str) -&gt; str:
    print(a + b)
    return a + b
</pre></div>
</div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Wrap the function in a Kubeflow lightweight component</strong>: the Kubeflow Python SDK allows you to build lightweight components by defining python functions and converting them using <code class="docutils literal notranslate"><span class="pre">kfp.components.create_component_from_func(&lt;python</span> <span class="pre">function&gt;)</span></code>. Specifying a custom Docker container image can be provided as a parameter of this function. The default base image is <em>python3.7</em>.</p></li>
</ol>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>combine_op = kfp.components.create_component_from_func(combine) # default base_image is python3.7
</pre></div>
</div>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Build a Kubeflow Pipeline using the component</strong>: You can use the component created above in a pipeline. The parameters of <code class="docutils literal notranslate"><span class="pre">&#64;dsl.pipeline</span></code> define the metadata of the pipeline. The combine_strings_pipeline has a decorator function with the goal of printing “Hello World!” as the final result.</p></li>
</ol>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>@dsl.pipeline(
  name=&#39;Hello World pipeline&#39;,
  description=&#39;An easy example pipeline that combines strings together to create the Hello World phrase.&#39;
)
def combine_strings_pipeline(a=&#39;Hello&#39;, b=&#39;World&#39;):
    # Passing in the first pipeline parameter (&#39;Hello&#39;) and a space to be combined by the  `combine_op` function.
    add_space = combine_op(a, &#39; &#39;)

    # Passes an output reference from `add_space` and the next pipeline parameter (&#39;World&#39;)
    combine_words = combine_op(add_space.output, b)

    # Adding an exclamation to the output reference from `combine_words`
    add_exclamation = combine_op(combine_words.output, &#39;!&#39;)
<br/></pre></div>
</div>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Compiling the Kubeflow Pipeline</strong>: Here we compile the pipeline function into a YAML file that Kubeflow Pipelines can use. A pipeline name, and the pipeline function to be processed are inputs for the compiler.</p></li>
</ol>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># COMPILE PIPELINE #
pipeline_name = &quot;Hello World Pipeline!&quot;
pipeline_func = combine_strings_pipeline
pipeline_filename = pipeline_func.__name__ + &#39;.pipeline.yaml&#39;
kfp.compiler.Compiler().compile(pipeline_func, pipeline_filename)
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>arguments = {&#39;a&#39;: &#39;Hello&#39;, &#39;b&#39;: &#39;World&#39;} # pipeline argument values
</pre></div>
</div>
</div>
<ol class="arabic simple" start="4">
<li><p><strong>Run the experiments</strong>: Kubeflow Pipelines lets you group pipeline runs by <strong>Experiments</strong>. Experiments are workspaces where you can try different configurations of your pipelines. You can use experiments to organize your runs into logical groups.</p></li>
</ol>
<ul class="simple">
<li><p>In this code block below, we create an experiment with the name “combine-hello-world” and label the run iteration manually. The <code class="docutils literal notranslate"><span class="pre">.run_pipeline(&lt;parameters&gt;)</span></code> function runs our specifc pipeline, outputting the hyperlinks to the Experiment and Run details.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># If the experiment under the given name already exists - get it&#39;s ID, else - create a new experiment
try:
    experiment_id = kubeflow_client.client.get_experiment(&quot;combine-hello-world&quot;)
except:
    experiment = kubeflow_client.client.create_experiment(&quot;combine-hello-world&quot;)

run_name = pipeline_func.__name__ + &#39;-run#1&#39;
run_result = kubeflow_client.client.run_pipeline(experiment.id, run_name, pipeline_filename, arguments)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2021-06-25 21:54:17 INFO (root): Creating experiment combine-hello-world.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<a href="http://kubeflow.geoanalytics.ca/pipeline/#/experiments/details/5a34b033-4187-44f0-b851-10498d3b42ea" target="_blank" >Experiment details</a>.</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<a href="http://kubeflow.geoanalytics.ca/pipeline/#/runs/details/f0617ebf-64e1-4c7e-9447-c421f46f29b8" target="_blank" >Run details</a>.</div>
</div>
<ol class="arabic simple" start="5">
<li><p><strong>Upload to the Kubeflow Pipelines UI</strong>: After developing your pipeline,the pipeline can be shared on the Kubeflow Pipelines UI.</p></li>
</ol>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>combine_hw_pipeline = kubeflow_client.client.upload_pipeline(pipeline_filename, pipeline_name, &quot;&#39;Hello World!&#39; created by the combine_strings pipeline!&quot;)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<a href=http://kubeflow.geoanalytics.ca/pipeline/#/pipelines/details/968ad52f-71a0-4109-b72f-e06740c4388e>Pipeline details</a>.</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>combine_hw_pipeline
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;created_at&#39;: datetime.datetime(2021, 6, 25, 21, 54, 17, tzinfo=tzlocal()),
 &#39;default_version&#39;: {&#39;code_source_url&#39;: None,
                     &#39;created_at&#39;: datetime.datetime(2021, 6, 25, 21, 54, 17, tzinfo=tzlocal()),
                     &#39;id&#39;: &#39;968ad52f-71a0-4109-b72f-e06740c4388e&#39;,
                     &#39;name&#39;: &#39;Hello World Pipeline!&#39;,
                     &#39;package_url&#39;: None,
                     &#39;parameters&#39;: [{&#39;name&#39;: &#39;a&#39;, &#39;value&#39;: &#39;Hello&#39;},
                                    {&#39;name&#39;: &#39;b&#39;, &#39;value&#39;: &#39;World&#39;}],
                     &#39;resource_references&#39;: [{&#39;key&#39;: {&#39;id&#39;: &#39;968ad52f-71a0-4109-b72f-e06740c4388e&#39;,
                                                      &#39;type&#39;: &#39;PIPELINE&#39;},
                                              &#39;name&#39;: None,
                                              &#39;relationship&#39;: &#39;OWNER&#39;}]},
 &#39;description&#39;: &#34;&#39;Hello World!&#39; created by the combine_strings pipeline!&#34;,
 &#39;error&#39;: None,
 &#39;id&#39;: &#39;968ad52f-71a0-4109-b72f-e06740c4388e&#39;,
 &#39;name&#39;: &#39;Hello World Pipeline!&#39;,
 &#39;parameters&#39;: [{&#39;name&#39;: &#39;a&#39;, &#39;value&#39;: &#39;Hello&#39;},
                {&#39;name&#39;: &#39;b&#39;, &#39;value&#39;: &#39;World&#39;}],
 &#39;url&#39;: None}
</pre></div></div>
</div>
</section>
<section id="2.3-Building-Pipelines-by-Docker-Images">
<h3>2.3 Building Pipelines by Docker Images<a class="headerlink" href="#2.3-Building-Pipelines-by-Docker-Images" title="Permalink to this headline">#</a></h3>
<p>Now that we have seen how lightweight containers are used in pipelines, we will explore how to build a pipeline using a docker container image. When Kubeflow Pipelines executes a component, a container image is started in a Kubernetes Pod and your component’s inputs are passed in as command-line arguments.</p>
<p>Before we can build our pipeline, let’s get our docker image ready for use. For our example, we will be using ‘library/bash:4.4.23’ image, publicly available on DockerHub. Using the same techniques from the <strong>Gitlab</strong> tutorial notebook, push this image to a private container registry.</p>
<ul class="simple">
<li><p><strong>Hint:</strong> Rename the image to <code class="docutils literal notranslate"><span class="pre">registry.geoanalytics.ca/&lt;username&gt;/bash-library</span></code></p></li>
</ul>
<p>Now let’s talk run the cell below to create an echo operation to be called within our pipeline. This function will return an operation that runs an image. <code class="docutils literal notranslate"><span class="pre">dsl.ContainerOp()</span></code> takes in multiple parameters, but for our example we will focus on only these four:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> – the name of the operation, which is ‘echo’ in this case.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">image</span></code> – the name of our container image.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">command</span></code> – the command to run in the container. <strong>‘sh’</strong> invokes the default shell as interpreter and the <strong>‘-c’</strong> flag means execute the following command as interpreted by this program.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arguments</span></code> – the arguments of the command. At container run time the argument will be <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">&quot;hello</span> <span class="pre">world&quot;</span></code>.</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>def echo_op():
    return dsl.ContainerOp(
        name=&#39;echo&#39;,
        image=&#39;registry.geoanalytics.ca/examples/bash-library&#39;,
        command=[&#39;sh&#39;, &#39;-c&#39;],
        arguments=[&#39;echo &quot;hello world&quot;&#39;]
    )
</pre></div>
</div>
</div>
<p>This python function directly returns a container operation and can be used in the pipeline. This means in contrast to the previous Python function (combine_op), there is no need to wrap the function as a component for it be processed in a pipeline.</p>
<p>The function below builds a Kubeflow Pipeline using the echo operation, similar to the lightweight function pipeline. The pipeline function calls our echo component as the main task. The image to be used exists in a private container registry which requires additional authentication steps. The <code class="docutils literal notranslate"><span class="pre">dsl.get_pipeline_conf()</span></code> allows configuration of the pipeline and uses the <code class="docutils literal notranslate"><span class="pre">.set_image_pull_secrets(...)</span></code> to authenticate the docker image using the secret name “regcredgeoanalytics.”</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from kubernetes import client

@dsl.pipeline(
    name=&#39;Echo Image pipeline&#39;,
    description=&#39;An example pipeline that echos &quot;hello world&quot; in the container image.&#39;
)
def echo_hello_world_pipeline():
    echo_task = echo_op()
    dsl.get_pipeline_conf().set_image_pull_secrets([client.V1LocalObjectReference(name=&quot;regcredgeoanalytics&quot;)]) # access to your registry
</pre></div>
</div>
</div>
<p>Compile, run, and upload your pipeline!</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># COMPILE PIPELINE #
pipeline_name = &quot;Echo Image Pipeline&quot;
pipeline_func = echo_hello_world_pipeline
pipeline_filename = pipeline_func.__name__ + &#39;.pipeline.yaml&#39;
kfp.compiler.Compiler().compile(pipeline_func, pipeline_filename)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/srv/conda/envs/notebook/lib/python3.8/site-packages/kfp/dsl/_container_op.py:1021: FutureWarning: Please create reusable components instead of constructing ContainerOp instances directly. Reusable components are shareable, portable and have compatibility and support guarantees. Please see the documentation: https://www.kubeflow.org/docs/pipelines/sdk/component-development/#writing-your-component-definition-file The components can be created manually (or, in case of python, using kfp.components.create_component_from_func or func_to_container_op) and then loaded using kfp.components.load_component_from_file, load_component_from_uri or load_component_from_text: https://kubeflow-pipelines.readthedocs.io/en/stable/source/kfp.components.html#kfp.components.load_component_from_file
  warnings.warn(
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># If the experiment under the given name already exists - get it&#39;s ID, else - create a new experiment
try:
    experiment_id = kubeflow_client.client.get_experiment(&quot;echo-image&quot;)
except:
    experiment = kubeflow_client.client.create_experiment(&quot;echo-image&quot;)

# RUN THE PIPELINE #
run_name = pipeline_func.__name__ + &#39;-run#1&#39;
arguments = {&#39;arg&#39;: &#39;echo &quot;hello world&quot;&#39;} # passing in the arguments
run_result = kubeflow_client.client.run_pipeline(experiment.id, run_name, pipeline_filename)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2021-06-25 21:54:17 INFO (root): Creating experiment echo-image.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<a href="http://kubeflow.geoanalytics.ca/pipeline/#/experiments/details/7ab33a7e-97d6-4435-9b46-59d97b13e840" target="_blank" >Experiment details</a>.</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<a href="http://kubeflow.geoanalytics.ca/pipeline/#/runs/details/67833d3e-0926-41f4-91d3-9683d496925e" target="_blank" >Run details</a>.</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>echo_pipeline = kubeflow_client.client.upload_pipeline(pipeline_filename, pipeline_name, &quot;ECHO IMAGE PIPELINE&quot;)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<a href=http://kubeflow.geoanalytics.ca/pipeline/#/pipelines/details/ad822c7a-1103-4a0c-86c1-1337bbb34461>Pipeline details</a>.</div>
</div>
</section>
</section>
<section id="3.-Exploring-the-GEOAnalytics-Kubeflow-UI">
<h2>3. Exploring the GEOAnalytics Kubeflow UI<a class="headerlink" href="#3.-Exploring-the-GEOAnalytics-Kubeflow-UI" title="Permalink to this headline">#</a></h2>
<section id="3.1-Kubeflow-Pipelines-and-Experiments">
<h3>3.1 Kubeflow Pipelines and Experiments<a class="headerlink" href="#3.1-Kubeflow-Pipelines-and-Experiments" title="Permalink to this headline">#</a></h3>
<p>The central Kubeflow Dashboard can be accessed from the main GEOAnalytics Canada page by clicking on Kubeflow to launch. <img alt="7d5d7ad0612f419e9a63f364b3972279" src="../_images/08_launching-kubeflow.gif" /></p>
<p>Now you will have access to the Kubeflow User Interface (UI).</p>
<p>On the left sidebar, click on the <strong>Pipelines</strong> tab which will lead to the main workspace for Kubeflow Pipelines UI. On the left panel in this section, there are multiple tabs, but for this tutorial we will focus on only the Pipelines and Experiments tab. The <em>Pipelines</em> tab leads you to all the existing pipelines you have access to and the option to upload a new pipeline. And the <em>Experiments</em> tab displays all the experients and the runs of each experiment. You can create runs, compare existing
runs, or even clone the runs.</p>
<p>You are welcome to experiment with running pipelines to get a better feel for their execution and the capabilities of the Pipelines UI.</p>
</section>
<section id="3.2-Analyzing-the-Hello-World-Pipeline">
<h3>3.2 Analyzing the Hello World Pipeline<a class="headerlink" href="#3.2-Analyzing-the-Hello-World-Pipeline" title="Permalink to this headline">#</a></h3>
<p>Under the Pipelines tab, you should see the newly built “Hello World Example Pipeline” at the top of the list of pipelines. There are other Tutorial and Demo pipelines preconfigured by Kubeflow for you to experiment with.</p>
<p>To invoke a specific pipeline, simply click it which will bring up Pipeline’s view as shown in the GIF below.</p>
<p><img alt="4c95e166b35c4efd820c3898ff910f7f" src="../_images/08_kubeflow-pipelines.gif" /></p>
<p>Within this pipeline there is a graph representing the runtime execution of the pipeline, with edges indicating parent/child relationships between the steps (nodes). Clicking on a node will give information about that step, such as the input parameter, the output result, arguments, internal commands to execute that step, and the volume mounts.</p>
<p><strong>Notebook and the pipeline run independently, so in case the notebook crashes, the experiment will continue running once executed.</strong></p>
</section>
<section id="3.3-Analyzing-the-Docker-Image-Pipeline">
<h3>3.3 Analyzing the Docker Image Pipeline<a class="headerlink" href="#3.3-Analyzing-the-Docker-Image-Pipeline" title="Permalink to this headline">#</a></h3>
<p>Take the same steps to view the information about our Echo Image Pipeline. In the graph there is only one node, “echo.” As you can note, the arguments, commands, at the image are the same ones we specified in the <code class="docutils literal notranslate"><span class="pre">ContainerOp</span></code>.</p>
<p>There is also another tab next to Graph, called <strong>YAML</strong>. This will show our pipeline filename we created when the pipeline was compiled.</p>
</section>
<section id="3.4-Create-a-New-Run-through-the-UI">
<h3>3.4 Create a New Run through the UI<a class="headerlink" href="#3.4-Create-a-New-Run-through-the-UI" title="Permalink to this headline">#</a></h3>
<p>While you can create a run through Jupyter notebooks, it can also be done directly through the UI if the pipeline is already uploaded. The image below shows the Kubeflow Pipelines UI for starting a run of the “Hello World Pipeline”. To run the pipeline, click the <strong>“Create Run”</strong> button and fill in the run details on the screen.</p>
<p>Filling in the Run Details:</p>
<ul class="simple">
<li><p>The <em>Pipeline</em> and <em>Pipeline Version</em> should already be set to the current pipeline, “Hello World Pipeline!”</p></li>
<li><p>The <em>Run name</em> can be set to anything you prefer, identifying the unique run.</p></li>
<li><p>The <em>Description</em> is an option to describe the details of the current run.</p></li>
<li><p>The <em>Experiment</em> to be associated with the run must be selected from the list of existing experiments, in our case it should be the <strong>“combine-hello-world”</strong>.</p></li>
<li><p>There are two different types of Runs, we will discuss these in the next part. For now, select <strong>“One-off”</strong> which executes the pipeline only once.</p></li>
<li><p>Now since we specified <em>Parameters</em> in our pipeline function, enter any two words in place of <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code>.</p></li>
</ul>
<p><img alt="0d6673d4df2248098356083c462218eb" src="../_images/08_start-run.png" /></p>
<p>After these sections have been filled in, select the <strong>“Start”</strong> to execute the run which will take a few seconds (or minutes depending on the pipeline). When the Status updates to a green checkmark it indicates the run was successfully executed. Click on the run to explore the details of the run.</p>
<p><img alt="89e366858ee64265834ffcc9757df870" src="../_images/08_run-created.gif" /></p>
</section>
<section id="3.5-Running-Pipelines-on-Schedule">
<h3>3.5 Running Pipelines on Schedule<a class="headerlink" href="#3.5-Running-Pipelines-on-Schedule" title="Permalink to this headline">#</a></h3>
<p>All our previous runs have been done manually, which is not ideal for some scenarios. Recurring runs are repeatable runs of a pipeline, very helpful if the pipeline is expected to run for a long period of time and is triggered to run frequently.</p>
<p>Let’s create a Recurring run on our “Echo Image Pipeline.” Fill in the details as shown in the screenshot below. Now you can create a periodic run by selecting a run type of <strong>“Recurring”</strong>, then choosing <strong>“Periodic”</strong> as the trigger type. Period runs specify <strong>how often</strong> to run a pipeline. In this example we are setting a pipeline to run every second day. Once you start the run, it is executed immediately and then executed with the defined frequency (of 2 days).</p>
<p><img alt="c9fb259e9ef44c8d914a3ccc48a1f867" src="../_images/08_create-recurring-run.png" /></p>
<p>From the “echo-image” experiment, you will see recurring run active, with the option to <code class="docutils literal notranslate"><span class="pre">enable</span></code> or <code class="docutils literal notranslate"><span class="pre">disable</span></code> the schedule.</p>
<p><strong>If you enable a recurring run for this example notebook, make sure to disable the run.</strong></p>
<p><img alt="6930869b775a4035a506d62fb7566c4d" src="../_images/08_recurring-run.gif" /></p>
</section>
<section id="3.6-Terminating-Runs">
<h3>3.6 Terminating Runs<a class="headerlink" href="#3.6-Terminating-Runs" title="Permalink to this headline">#</a></h3>
<p>In the case where the run takes a while to execute and you want to stop the run, it can be terminated through the UI. Once you click on the ongoing run, you will see a <strong>“Terminate”</strong> button in the top right of the page. This will immediately terminate the execution of that run, but it will not delete the record of the run.</p>
<p>The next section will show how to delete runs, experiments, and pipelines in a Jupyter notebook.</p>
</section>
</section>
<section id="4.-Deleting-Runs,-Experiments,-and-Pipelines">
<h2>4. Deleting Runs, Experiments, and Pipelines<a class="headerlink" href="#4.-Deleting-Runs,-Experiments,-and-Pipelines" title="Permalink to this headline">#</a></h2>
<p>To keep your environment clean, let’s delete the runs, experiments, and pipelines we created in this notebook. (You can choose to keep them if you prefer!)</p>
<section id="4.1-Delete-all-the-runs">
<h3>4.1 Delete all the runs<a class="headerlink" href="#4.1-Delete-all-the-runs" title="Permalink to this headline">#</a></h3>
<p>The following code blocks show how to delete runs of a particular experiments.</p>
<p>We use <code class="docutils literal notranslate"><span class="pre">.get_experiment(&lt;name&gt;)</span></code> to get the experiment id which will be used to find all the runs within this experiment. Let’s start by getting the experiment information for the “echo-image” and the “combine-hello-world image” experiments.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>echo_experiment = kubeflow_client.client.get_experiment(experiment_name=&#39;echo-image&#39;)
echo_experiment
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;created_at&#39;: datetime.datetime(2021, 6, 25, 21, 54, 17, tzinfo=tzlocal()),
 &#39;description&#39;: None,
 &#39;id&#39;: &#39;7ab33a7e-97d6-4435-9b46-59d97b13e840&#39;,
 &#39;name&#39;: &#39;echo-image&#39;,
 &#39;resource_references&#39;: None,
 &#39;storage_state&#39;: None}
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>combine_hw_experiment = kubeflow_client.client.get_experiment(experiment_name=&#39;combine-hello-world&#39;)
combine_hw_experiment
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;created_at&#39;: datetime.datetime(2021, 6, 25, 21, 54, 17, tzinfo=tzlocal()),
 &#39;description&#39;: None,
 &#39;id&#39;: &#39;5a34b033-4187-44f0-b851-10498d3b42ea&#39;,
 &#39;name&#39;: &#39;combine-hello-world&#39;,
 &#39;resource_references&#39;: None,
 &#39;storage_state&#39;: None}
</pre></div></div>
</div>
<p>Now that we have the the information for our experiments in a dictionary, we can use the ‘id’ key to delete the experiments’ runs. The cells below collects information for all the runs of each experiment, and iteratively deletes each run.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>combine_hw_runs = kubeflow_client.client.list_runs(experiment_id=combine_hw_experiment.id)
# Delete all runs from the &quot;combine-hello-world&quot; experiment
for i in range(len(combine_hw_runs.runs)):
    print(combine_hw_runs.runs[i].id)
    kubeflow_client.client.runs.delete_run(combine_hw_runs.runs[i].id)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
f0617ebf-64e1-4c7e-9447-c421f46f29b8
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>echo_runs = kubeflow_client.client.list_runs(experiment_id=echo_experiment.id)
# Delete all runs from the &quot;combine-hello-world&quot; experiment
for i in range(len(echo_runs.runs)):
    print(echo_runs.runs[i].id)
    kubeflow_client.client.runs.delete_run(echo_runs.runs[i].id)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
67833d3e-0926-41f4-91d3-9683d496925e
</pre></div></div>
</div>
<p>Now, if you head over to the Kubeflow Pipeline UI and take a look at the experiments, there should be no runs available anymore.</p>
</section>
<section id="4.2-Delete-the-experiments">
<h3>4.2 Delete the experiments<a class="headerlink" href="#4.2-Delete-the-experiments" title="Permalink to this headline">#</a></h3>
<p>Since the runs are deleted, we can safely delete the experiments without worrying about unexpected behaviors.</p>
<p>We already have the experiment IDs which will be the parameter input for the function <code class="docutils literal notranslate"><span class="pre">.experiments.delete_experiments(&lt;experiment_id&gt;)</span></code>. Once you have run the cell below, refresh your Experiments page on the UI to see these experiments disappear from the list.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>kubeflow_client.client.experiments.delete_experiment(combine_hw_experiment.id) # deletes combine-hello-world experiment
kubeflow_client.client.experiments.delete_experiment(echo_experiment.id) # deletes echo-image experiment
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{}
</pre></div></div>
</div>
</section>
<section id="4.3-Delete-the-pipelines">
<h3>4.3 Delete the pipelines<a class="headerlink" href="#4.3-Delete-the-pipelines" title="Permalink to this headline">#</a></h3>
<p>Pipelines can be deleted through Jupyter <em>and</em> through the Kubeflow Pipeline UI!</p>
<p>To delete through the UI, simply tick off the boxes next to the pipelines and select the <strong>Delete</strong> button to delete them.</p>
<p>There are different steps for deleting through a Jupyter notebook. When we uploaded the combine_strings pipeline and echo_image pipeline, we assigned the information of the pipelines to variables <strong>combine_hw_pipeline</strong> and <strong>echo_pipeline</strong>, respectively. We will use the <strong>‘id’</strong> keys from their pipeline information dictionaries (similar to how the experiment IDs were retrieved) as the parameter for identifying the pipelines we wish to delete, using the function
<code class="docutils literal notranslate"><span class="pre">delete_pipeline(&lt;pipeline_id&gt;)</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>kubeflow_client.client.delete_pipeline(combine_hw_pipeline.id)
kubeflow_client.client.delete_pipeline(echo_pipeline.id)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{}
</pre></div></div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="10-dask.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">&lt;no title&gt;</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="08-gitlab.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><strong>GitLab</strong></div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Hatfield Consultants
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#"><strong>Pipelines</strong></a><ul>
<li><a class="reference internal" href="#1.-Basics-of-the-GEOAnalytics-Kubeflow-Pipelines">1. Basics of the GEOAnalytics Kubeflow Pipelines</a></li>
<li><a class="reference internal" href="#2.-Building-Pipelines-in-Jupyterhub">2. Building Pipelines in Jupyterhub</a><ul>
<li><a class="reference internal" href="#2.1-Connect-to-GEOAnalytics-Kubeflow-Client¶">2.1 Connect to GEOAnalytics Kubeflow Client¶</a></li>
<li><a class="reference internal" href="#2.2-Building-Pipelines-through-Python-Function-Based-Components">2.2 Building Pipelines through Python Function Based Components</a></li>
<li><a class="reference internal" href="#2.3-Building-Pipelines-by-Docker-Images">2.3 Building Pipelines by Docker Images</a></li>
</ul>
</li>
<li><a class="reference internal" href="#3.-Exploring-the-GEOAnalytics-Kubeflow-UI">3. Exploring the GEOAnalytics Kubeflow UI</a><ul>
<li><a class="reference internal" href="#3.1-Kubeflow-Pipelines-and-Experiments">3.1 Kubeflow Pipelines and Experiments</a></li>
<li><a class="reference internal" href="#3.2-Analyzing-the-Hello-World-Pipeline">3.2 Analyzing the Hello World Pipeline</a></li>
<li><a class="reference internal" href="#3.3-Analyzing-the-Docker-Image-Pipeline">3.3 Analyzing the Docker Image Pipeline</a></li>
<li><a class="reference internal" href="#3.4-Create-a-New-Run-through-the-UI">3.4 Create a New Run through the UI</a></li>
<li><a class="reference internal" href="#3.5-Running-Pipelines-on-Schedule">3.5 Running Pipelines on Schedule</a></li>
<li><a class="reference internal" href="#3.6-Terminating-Runs">3.6 Terminating Runs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#4.-Deleting-Runs,-Experiments,-and-Pipelines">4. Deleting Runs, Experiments, and Pipelines</a><ul>
<li><a class="reference internal" href="#4.1-Delete-all-the-runs">4.1 Delete all the runs</a></li>
<li><a class="reference internal" href="#4.2-Delete-the-experiments">4.2 Delete the experiments</a></li>
<li><a class="reference internal" href="#4.3-Delete-the-pipelines">4.3 Delete the pipelines</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/tabs.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>