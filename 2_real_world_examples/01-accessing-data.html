<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="NDVI with Sentinel-2 and Dask" href="02-ndvi-s2-dask.html" /><link rel="prev" title="Real World Examples" href="index.html" />

    <meta name="generator" content="sphinx-4.5.0, furo 2022.04.07"/>
        <title>Accessing and Downloading Data - GeoAnalytics Canada Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=68f4518137b9aefe99b631505a2064c3c42c9852" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">GeoAnalytics Canada Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/geoanalytics-icon.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">GeoAnalytics Canada Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../1_getting_started/index.html">Getting Started</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../1_getting_started/00-how-to-use-this-documentation.html">How to use this documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_getting_started/02-geospatial-python.html"><strong>Working with Earth Observation data in Python</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_getting_started/04-authentication.html"><strong>Authentication</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_getting_started/03-jupyter-notebooks.html"><strong>Jupyter Notebooks</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_getting_started/05-desktop-vm.html"><strong>Desktop VM’s</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_getting_started/05a-ssh-keys.html">Set Up SSH Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_getting_started/05b-remote-connect-vscode.html">Remote Connection via VSCode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_getting_started/06-file-browser.html"><strong>File Browser</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_getting_started/07-stac.html"><strong>SpatioTemporal Asset Catalog (STAC)</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_getting_started/08-container-registry.html"><strong>Container Registry</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_getting_started/09-pipelines.html">Pipelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_getting_started/10-dask.html"><strong>Dask</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../1_getting_started/11-docker-and-pipelines.html">Docker &amp; Pipelines</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Real World Examples</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#"><strong>Accessing and Downloading Data</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="02-ndvi-s2-dask.html"><strong>NDVI with Sentinel-2 and Dask</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="03-ndsi-modis-dask.html"><strong>NDSI with MODIS and Dask</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="04-ndmi-landsat8-dask.html"><strong>NDMI with Landsat 8 Dask</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="05-change-detection.html"><strong>Change Detection</strong></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../3_scientific_workflows/index.html">Scientific Workflows</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../3_scientific_workflows/01-daily-ndsi-pipeline.html"><strong>Daily NDSI Average Pipeline</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../3_scientific_workflows/02-kmeans-dask.html">K-Means Land Classification with Dask</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3_scientific_workflows/03-composite.html">Compositing Rasters with Dask</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3_scientific_workflows/04-add-to-stac.html"><strong>Adding data to the Geoanalytics STAC server</strong></a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<section id="Accessing-and-Downloading-Data">
<h1><strong>Accessing and Downloading Data</strong><a class="headerlink" href="#Accessing-and-Downloading-Data" title="Permalink to this headline">#</a></h1>
<p>```{admonition} Tutorial does not work on EO4PH Cluster :class: error</p>
<p>This tutorial is specific to the GEOAnalytics cluster deployed to the Google Cloud environment. This tutorial does not work on the EO4PH cluster which is deployed to Azure. ```</p>
<p>There are multiple methods of accessing data such as MODIS, VIIRS, Sentinel-2, Landsat-8, and Sentinel-1. Some data are publically available within the GEOAnalytics environment and mounted appropriately. If the data is not mounted as a bucket, it may be available through STAC endpoints within GEOAnalytics. Finally, if the data does not exist in either of those places, using a client to request data over HTTPS may be required.</p>
<section id="1.-Location-of-the-GEOAnalytics-folders">
<h2>1. Location of the GEOAnalytics folders<a class="headerlink" href="#1.-Location-of-the-GEOAnalytics-folders" title="Permalink to this headline">#</a></h2>
<p>As you can see in the file browser tab, there are 5 folders and multiple files provided as default. There are three different type of folders available in the GEOAnalytics JupyterLab platform:</p>
<ul class="simple">
<li><p><strong>Public Mounted Buckets</strong>: Folders that do not require any access key (publicly available).</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">gcp-public-data-landsat</span></code> - All Landsat data (worldwide; including Landsat 4, 5, 7 and 8) as provided by Google’s public data program. This location is <em>read-only.</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gcp-public-data-sentinel-2</span></code> - All Sentinel-2 data (worldwide) as provided by Google’s public data program. This location is <em>read-only.</em></p></li>
</ul>
</li>
<li><p><strong>Private Mounted Buckets</strong>: Folders available only if you have GEOAnalytics Platform access.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">geoanalytics_data</span></code> - EO data collections (such as sen2cor, VIIRS data) available to all users of GEOAnalytics. This location is <em>read-only.</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geoanalytics_user_shared_data</span></code> - All platform EO data collections including raw datasets and pre-processed datasets. <em>All users can read and write to this location.</em></p></li>
</ul>
</li>
<li><p><strong>Personal Storage</strong></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">geoanalytics_&lt;username&gt;</span></code> - A user’s personal network file system where only the logged in user can <em>read or write</em> to their own personal storage directory.</p></li>
</ul>
</li>
</ul>
</section>
<section id="2.-Accessing-the-Public-Data-Buckets-in-JupyterHub">
<h2>2. Accessing the Public Data Buckets in JupyterHub<a class="headerlink" href="#2.-Accessing-the-Public-Data-Buckets-in-JupyterHub" title="Permalink to this headline">#</a></h2>
<p>The Landsat and Sentinel-2 Satellite Images are available for free as part of the Google Public Cloud Data program.</p>
<section id="2.1-Sentinel-2-Files">
<h3>2.1 Sentinel-2 Files<a class="headerlink" href="#2.1-Sentinel-2-Files" title="Permalink to this headline">#</a></h3>
<p>As an example, let’s take a look into the Sentinel-2 public mounted folder structure (gcp-public-data-sentinel-2 folder):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/home/jovyan/</span></code> - The home directory for GEOAnalytics Canada.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gcp-public-data-sentinel-2/</span></code> - Public Mount of the Google Cloud Platform of Sentinel-2 datasets.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tiles/</span></code> - folder with all the square tiles of approximately 100 kilometers on the Earth’s grid surface.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UTM_ZONE/</span></code> - A number indicating the longitude zone in the Universal Transverse Mercator (UTM) system.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LATITUDE_BAND/</span></code> - A letter in the range “C” through “X” (omitting “I” and “O”) which indicates the latitude band.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRID_SQUARE/</span></code> - A two-letter code indicating the particular 100 km square region.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRANULE_ID/</span></code> - The ID of a particular granule, which contains images of this grid square at some point in time.</p>
<ul>
<li><p><strong>.SAFE</strong> : Granule images and the metadata are organized according to the product format (Standard Archive Format for Europe)</p></li>
</ul>
</li>
<li><p><em>There are three subdirectories within the granule itself:</em></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">IMG_DATA/</span></code> - Contains the actual image data in thirteen JPEG 2000 files (one for each spectral band).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">QI_DATA/</span></code> - Contains quality control reports for this granule.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AUX_DATA/</span></code> Contains ECMWF weather forecast data for this granule.</p></li>
</ul>
</li>
</ul>
<p>For our example, the image we want is “T11SLB_20210511T183919_B08.jp2”:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">T11SLB</span></code> - The Tile number, from the US Military Grid Reference System (MGRS) naming convention.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">20210511T183919</span></code> - The Acquisition Start date (Year-Month-Day, followed by the time in UTC time zone).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">B08</span></code> - The separate band raster image (In Sentinel 2, Band 8 is the Near Infrared band).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.jp2</span></code> - The product file format in JPEG2000 format.</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[73]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sentinel_fp</span> <span class="o">=</span> <span class="s2">"/home/jovyan/gcp-public-data-sentinel-2/tiles/11/S/LB/S2B_MSIL1C_20210511T183919_N0300_R070_T11SLB_20210511T210256.SAFE/GRANULE/L1C_T11SLB_A021832_20210511T184632/IMG_DATA/T11SLB_20210511T183919_B08.jp2"</span>

</pre></div>
</div>
</div>
<p>Now, let’s use Rasterio to display the JPEG 2000 image of band 8 and see if it works properly. The second parameter, <strong>“driver”</strong>, emphasizes to open a JPEG2000 file using only the JP2OpenJPEG driver.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[78]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">rasterio</span>
<span class="kn">from</span> <span class="nn">rasterio.plot</span> <span class="kn">import</span> <span class="n">show</span>

<span class="c1"># access the driver in 'read' mode</span>
<span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">sentinel_fp</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span> <span class="s1">'JP2OpenJPEG'</span><span class="p">)</span> <span class="k">as</span> <span class="n">src</span><span class="p">:</span>
    <span class="n">b8</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">b8</span><span class="p">)</span>
    <span class="n">show</span><span class="p">(</span><span class="n">b8</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">'terrain'</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(10980, 10980)
[[4433 1984 2788 ... 2994 2892 2768]
 [5140 2726 3532 ... 2951 2801 2766]
 [4347 2850 3861 ... 2917 2754 2749]
 ...
 [2192 2204 2147 ... 2071 2037 2040]
 [2189 2200 2142 ... 1970 1904 1964]
 [2060 2150 2216 ... 1860 1810 1902]]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/2_real_world_examples_01-accessing-data_4_1.png" src="../_images/2_real_world_examples_01-accessing-data_4_1.png"/>
</div>
</div>
</section>
<section id="2.2-Landsat-Files">
<h3>2.2 Landsat Files<a class="headerlink" href="#2.2-Landsat-Files" title="Permalink to this headline">#</a></h3>
<p>The Google Cloud Platform collection includes the complete USGS archive from Landsat 4, 5, 7, and 8. It covers their full operational lifetimes, with over four million unique scenes over 35 years. Different Landsat satellites have used sensors with different characteristics, so the data is organized by sensor in the following directory structure:</p>
<ul class="simple">
<li><p><strong>LC08</strong> - Landsat 8 TOA Reflectance</p></li>
<li><p><strong>LE07</strong> - Landsat 7 Enhanced Thematic Mapper Plus (ETM+)</p></li>
<li><p><strong>LM01</strong> - Landsat 1 Multispectral Scanner System (MSS)</p></li>
<li><p><strong>LM02</strong> - Landsat 2 Multispectral Scanner System (MSS)</p></li>
<li><p><strong>LM03</strong> - Landsat 3 Multispectral Scanner System (MSS)</p></li>
<li><p><strong>LM04</strong> - Landsat 4 Multispectral Scanner System (MSS)</p></li>
<li><p><strong>LM05</strong> - Landsat 5 Multispectral Scanner System (MSS)</p></li>
<li><p><strong>LO08</strong> - Landsat 8 OLI Raw Scenes</p></li>
<li><p><strong>LT04</strong> - Landsat 4 Thematic Mapper (TM)</p></li>
<li><p><strong>LT05</strong> - Landsat 5 Thematic Mapper (TM)</p></li>
<li><p><strong>LT08</strong> - Landsat 8 TIRS Raw Scenes</p></li>
</ul>
<p>The Landsat satellite images are stored in the Cloud-Optimized GeoTIFF file format, with each spectral band stored in a separate file for easy access. The images are organized in the Worldwide Reference System (WRS) grid, which divides the world into 251 orbital paths and 248 rows.</p>
<p>The components of this path are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SENSOR_ID/</span></code>: The satellite and sensor identifier.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">01/</span></code>: Indicates that it is part of Landsat Collection 1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PATH/</span></code>: The WRS path number.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ROW/</span></code>: The WRS row number.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SCENE_ID/</span></code>: The unique scene ID. (with Acquisition Date)</p></li>
</ul>
<p>As an example, here is the naming convention of the file <strong>“LM05_L1TP_011023_19950729_20180315_01_T2_B4.TIF”</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LM05</span></code> - The Satellite and Sensor (Landsat 5 MSS)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">L1TP</span></code> - The processing correction level</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">011023</span></code> The WRS path followed by the WRS row (Path 11, Row 23)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">19950729</span></code> - The acquisition date (1995-07-29)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">20180315</span></code> - The processing date (2018-03-15)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">01</span></code> - The collection number (Collection 1)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">T2</span></code> - The collection category (Tier 2)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">B4</span></code> - The band of that granule (Band 4)</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">landsat_fp</span> <span class="o">=</span> <span class="s2">"/home/jovyan/gcp-public-data-landsat/LM05/01/011/023/LM05_L1TP_011023_19950729_20180315_01_T2/LM05_L1TP_011023_19950729_20180315_01_T2_B4.TIF"</span>
</pre></div>
</div>
</div>
<p>To plot the raster image, let’s use GDAL, a popular library for dealing with GeoTiff images. The <code class="docutils literal notranslate"><span class="pre">gdal.GA_ReadOnly</span></code> argument passed in when opening the file expresses the access desired (GA_ReadOnly or GA_Update).</p>
<p>You can use Rasterio instead to open and read the file. Rasterio is a wrapper around GDALs functionality.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[79]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">osgeo</span> <span class="kn">import</span> <span class="n">gdal</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">band</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">landsat_fp</span><span class="p">,</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GA_ReadOnly</span><span class="p">)</span>
<span class="n">arr</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">'terrain'</span><span class="p">)</span>
<span class="k">del</span> <span class="n">band</span> <span class="c1"># closing the band</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/2_real_world_examples_01-accessing-data_8_0.png" src="../_images/2_real_world_examples_01-accessing-data_8_0.png"/>
</div>
</div>
</section>
</section>
<section id="3.-Downloading-Data-that-is-not-Available-in-GEOAnalytics">
<h2>3. Downloading Data that is not Available in GEOAnalytics<a class="headerlink" href="#3.-Downloading-Data-that-is-not-Available-in-GEOAnalytics" title="Permalink to this headline">#</a></h2>
<p>The GEOAnalytics Canada Platform has a wide range of Earth Observation data available from the satellites MODIS, VIIRS, Sentinel-1, Sentinel-2, and Landsat-8. However, you may require data from external sources for your projects if they are not available on our platform.</p>
<p>We encourage you to import and make use of packages and softwares within your GEOAnalytics environment.</p>
<p>Let’s take a look at a few Python Packages you can use to access data. First, run the cell below which installs the packages SentinelHub and NASA’s Python CMR.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">!</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>data/requirements_1.txt
</pre></div>
</div>
</div>
<section id="3.1-SentinelHub">
<h3>3.1 SentinelHub<a class="headerlink" href="#3.1-SentinelHub" title="Permalink to this headline">#</a></h3>
<p>The SentinelHub Python package lets users make Open Geospatial Consortium (OGC) web requests to download and process satellite images within Python scripts. Sentinel Hub eliminates the hassle of downloading, archiving and processing petabytes of data and makes the global archive available through web services. Most of the major features are linked to the user’s Sentinel Hub account which provide support for: - Web Map Service (WMS) and Web Coverage Service (WCS) requests. - Multi-spectra layers
and for multi-temporal requests. - Cloud coverage filtering. - Different Coordinate Reference Systems. - Reading and writing downloaded data to disk in the most common image and data formats.</p>
<p>The code block below imports and displays the data collections available in SentinelHub.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">sentinelhub</span> <span class="kn">import</span> <span class="n">DataCollection</span>

<span class="c1"># The available data collections</span>
<span class="k">for</span> <span class="n">collection</span> <span class="ow">in</span> <span class="n">DataCollection</span><span class="o">.</span><span class="n">get_available_collections</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
DataCollection.SENTINEL2_L1C
DataCollection.SENTINEL2_L2A
DataCollection.SENTINEL1
DataCollection.SENTINEL1_IW
DataCollection.SENTINEL1_IW_ASC
DataCollection.SENTINEL1_IW_DES
DataCollection.SENTINEL1_EW
DataCollection.SENTINEL1_EW_ASC
DataCollection.SENTINEL1_EW_DES
DataCollection.SENTINEL1_EW_SH
DataCollection.SENTINEL1_EW_SH_ASC
DataCollection.SENTINEL1_EW_SH_DES
DataCollection.DEM
DataCollection.DEM_MAPZEN
DataCollection.DEM_COPERNICUS_30
DataCollection.DEM_COPERNICUS_90
DataCollection.MODIS
DataCollection.LANDSAT45_L1
DataCollection.LANDSAT45_L2
DataCollection.LANDSAT8
DataCollection.LANDSAT8_L1
DataCollection.LANDSAT8_L2
DataCollection.SENTINEL5P
DataCollection.SENTINEL3_OLCI
DataCollection.SENTINEL3_SLSTR
</pre></div></div>
</div>
<p><strong>To create your account and get started with Sentinelhub, take a look at their documentation: https://sentinelhub-py.readthedocs.io/en/latest/index.html</strong></p>
</section>
<section id="3.2-NASA-CMR">
<h3>3.2 NASA CMR<a class="headerlink" href="#3.2-NASA-CMR" title="Permalink to this headline">#</a></h3>
<p>NASA Common Metadata Repository (CMR) is a way to search for remote sensing datasets across many archive centers. The CMR returns download links through the USGS (<a class="reference external" href="https://earthexplorer.usgs.gov">https://earthexplorer.usgs.gov</a>) to the imagery stored on Google Cloud.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[64]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">cmr</span> <span class="kn">import</span> <span class="n">CollectionQuery</span><span class="p">,</span> <span class="n">GranuleQuery</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">CollectionQuery</span><span class="p">()</span>

</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[174]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">collections</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">archive_center</span><span class="p">(</span><span class="s2">"LP DAAC"</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>

<span class="k">for</span> <span class="n">collection</span> <span class="ow">in</span> <span class="n">collections</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">collection</span><span class="p">[</span><span class="s2">"short_name"</span><span class="p">])</span> <span class="c1"># Different versions of the same collection</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MOD09GA
MOD09GA
MOD09GQ
MOD09GQ
MYD09GA
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[177]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">api</span> <span class="o">=</span> <span class="n">GranuleQuery</span><span class="p">()</span>
<span class="n">granules</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">short_name</span><span class="p">(</span><span class="s2">"MOD09GA"</span><span class="p">)</span><span class="o">.</span><span class="n">point</span><span class="p">(</span><span class="o">-</span><span class="mf">112.73</span><span class="p">,</span> <span class="mf">42.5</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="k">for</span> <span class="n">granule</span> <span class="ow">in</span> <span class="n">granules</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">granule</span><span class="p">[</span><span class="s2">"title"</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
LANCEMODIS:1316830593
LANCEMODIS:1318106143
LANCEMODIS:1318961142
</pre></div></div>
</div>
<p><strong>Take a look at the documentation: https://cmr.earthdata.nasa.gov/search/</strong></p>
<p><strong>Note: You can access any data you download to your personal NFS folder within the Remote Desktops as well!</strong></p>
</section>
</section>
<section id="4.-Ground-Truth-Collection">
<h2>4. Ground Truth Collection<a class="headerlink" href="#4.-Ground-Truth-Collection" title="Permalink to this headline">#</a></h2>
<p>The GEOAnalytics Canada platform has a ground truth data management system which allows vector ground truth data to be uploaded, viewed, deleted and integrated into other platform services, such as the EO data pre-processing and Jupyter-Lab analytic environments. The Ground Truth data management system is accessible from the main platform dashboard.</p>
<p>Ground Truth data is organized into collections that originate from uploaded shape files. Clicking on a collection’s “Action” button allows collections to be deleted, or the features to be navigated and explored.</p>
<section id="4.1-Working-with-Existing-Data">
<h3>4.1 Working with Existing Data<a class="headerlink" href="#4.1-Working-with-Existing-Data" title="Permalink to this headline">#</a></h3>
<p>Let’s start by exploring existing ground truth data. Navigate to the Ground Truth Collection and click on any features “Action:” button and selecting “Details”. The links to the API end points are provided by clicking on “Links”. API endpoints provided by the Ground Truth system implement the Open Geospatial Consortium’s (OGC) API-Features specification allowing for standards compliant libraries and applications to easily access all Ground Truth data.</p>
<p>The GIF below shows how to access the GeoJSON for the polygons in the <strong>SE_AGR</strong> dataset.</p>
<p><img alt="867fb2703039486385603c85111c38b3" src="../_images/01_ground_truth_access.gif"/></p>
<p>Since we have the URL path to this geoJSON, let’s plot the polygons within this Jupyter Notebook. First import the neccessary modules and enter your GEOAnalytics Authentication Token.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">yaml</span>

<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>
<span class="kn">import</span> <span class="nn">cartopy.feature</span> <span class="k">as</span> <span class="nn">cfeature</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">Polygon</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">API_TOKEN</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Please copy and paste your API Access Token here: "</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Now we will open the geoJSON as a geopandas dataframe, limiting to only the first 10 shapes.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">open_geojson</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'cookie'</span><span class="p">:</span> <span class="n">API_TOKEN</span><span class="p">}</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">'limit'</span><span class="p">:</span><span class="mi">10</span><span class="p">})</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">gdf</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">geojson_url</span> <span class="o">=</span> <span class="s1">'https://gt.data.geoanalytics.ca/collections/SE_AGR/items?f=json'</span>
<span class="n">gdf</span> <span class="o">=</span> <span class="n">open_geojson</span><span class="p">(</span><span class="n">geojson_url</span><span class="p">)</span>
<span class="n">gdf</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<div class="table-wrapper"><table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Id</th>
<th>Nvx1</th>
<th>Nvx2</th>
<th>Nvx3</th>
<th>id</th>
<th>upload_id</th>
<th>attribute_id</th>
<th>upload_name</th>
<th>geometry</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>1</td>
<td>AGR</td>
<td>FOI</td>
<td>FOI1</td>
<td>1281</td>
<td>28</td>
<td>0</td>
<td>SE_AGR</td>
<td>POLYGON ((-73.23565 45.49244, -73.23561 45.492...</td>
</tr>
<tr>
<th>1</th>
<td>0</td>
<td>AGR</td>
<td>FOI</td>
<td>FOI1</td>
<td>1282</td>
<td>28</td>
<td>1</td>
<td>SE_AGR</td>
<td>POLYGON ((-73.26455 45.47713, -73.26448 45.477...</td>
</tr>
<tr>
<th>2</th>
<td>2</td>
<td>AGR</td>
<td>FOI</td>
<td>FOI1</td>
<td>1283</td>
<td>28</td>
<td>2</td>
<td>SE_AGR</td>
<td>POLYGON ((-73.14833 45.42648, -73.14280 45.426...</td>
</tr>
<tr>
<th>3</th>
<td>3</td>
<td>AGR</td>
<td>FOI</td>
<td>FOI1</td>
<td>1284</td>
<td>28</td>
<td>3</td>
<td>SE_AGR</td>
<td>POLYGON ((-73.08542 45.37113, -73.08361 45.369...</td>
</tr>
<tr>
<th>4</th>
<td>4</td>
<td>AGR</td>
<td>FOI</td>
<td>FOI1</td>
<td>1285</td>
<td>28</td>
<td>4</td>
<td>SE_AGR</td>
<td>POLYGON ((-73.17751 45.22490, -73.17699 45.224...</td>
</tr>
<tr>
<th>5</th>
<td>5</td>
<td>AGR</td>
<td>FOI</td>
<td>FOI1</td>
<td>1286</td>
<td>28</td>
<td>5</td>
<td>SE_AGR</td>
<td>POLYGON ((-73.65168 45.05087, -73.65084 45.050...</td>
</tr>
<tr>
<th>6</th>
<td>6</td>
<td>AGR</td>
<td>FOI</td>
<td>FOI1</td>
<td>1287</td>
<td>28</td>
<td>6</td>
<td>SE_AGR</td>
<td>POLYGON ((-73.82663 45.03836, -73.82454 45.038...</td>
</tr>
<tr>
<th>7</th>
<td>7</td>
<td>AGR</td>
<td>FOI</td>
<td>FOI1</td>
<td>1288</td>
<td>28</td>
<td>7</td>
<td>SE_AGR</td>
<td>POLYGON ((-74.02452 45.20584, -74.02444 45.205...</td>
</tr>
<tr>
<th>8</th>
<td>8</td>
<td>AGR</td>
<td>FOI</td>
<td>FOI1</td>
<td>1289</td>
<td>28</td>
<td>8</td>
<td>SE_AGR</td>
<td>POLYGON ((-73.90605 45.60349, -73.90519 45.603...</td>
</tr>
<tr>
<th>9</th>
<td>9</td>
<td>AGR</td>
<td>FOI</td>
<td>FOI1</td>
<td>1290</td>
<td>28</td>
<td>9</td>
<td>SE_AGR</td>
<td>POLYGON ((-73.21586 45.63266, -73.21574 45.632...</td>
</tr>
</tbody>
</table></div>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">gdf</span><span class="o">.</span><span class="n">geometry</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/2_real_world_examples_01-accessing-data_26_0.svg" src="../_images/2_real_world_examples_01-accessing-data_26_0.svg"/></div>
</div>
<p>We’ll use the geographic features from the Cartopy Package and display the polygons from the SE_AGR data overtop.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[148]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">proj</span> <span class="o">=</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">epsg</span><span class="p">(</span><span class="mi">32662</span><span class="p">)</span>
<span class="n">gdf_epsg</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="mi">32662</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">'projection'</span><span class="p">:</span> <span class="n">proj</span><span class="p">},</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span><span class="o">-</span><span class="mf">74.5</span><span class="p">,</span> <span class="o">-</span><span class="mi">72</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="mf">44.5</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">LAKES</span><span class="p">)</span><span class="c1">#.with_scale('10m'))#, alpha=0.5)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">RIVERS</span><span class="p">)</span><span class="c1">#.with_scale('10m'), alpha=0.5)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">STATES</span><span class="p">)</span><span class="c1">#.with_scale('10m'))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_geometries</span><span class="p">(</span><span class="n">gdf_epsg</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">proj</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">'red'</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">stock_img</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'Attributes with Nvx1=AGR, Nvx3=FOI1'</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/2_real_world_examples_01-accessing-data_28_0.png" src="../_images/2_real_world_examples_01-accessing-data_28_0.png"/>
</div>
</div>
</section>
<section id="4.2-Uploading-New-Data">
<h3>4.2 Uploading New Data<a class="headerlink" href="#4.2-Uploading-New-Data" title="Permalink to this headline">#</a></h3>
<p>New shape files can be uploaded to the system by clicking ‘Add Collection’. Then navigate to the Zip file containing the shapefile and upload to the collection.</p>
<p><img alt="86e7eca61dad49a7b1d9bfa52013f6de" src="../_images/01_ground-truth-upload.gif"/></p>
<p>Now, we will repeat the previous steps, but with our newly uploaded Canada shapefile.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[156]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">canada_url</span> <span class="o">=</span> <span class="s1">'https://gt.data.geoanalytics.ca/collections/canada_shp/items?f=json'</span>
<span class="n">canada_gdf</span> <span class="o">=</span> <span class="n">open_geojson</span><span class="p">(</span><span class="n">canada_url</span><span class="p">)</span>
<span class="n">canada_gdf</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[156]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<div class="table-wrapper"><table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>location</th>
<th>id</th>
<th>upload_id</th>
<th>attribute_id</th>
<th>upload_name</th>
<th>geometry</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>Canada</td>
<td>1764</td>
<td>35</td>
<td>0</td>
<td>canada_shp</td>
<td>POLYGON ((-141.12089 69.53452, -128.83087 70.1...</td>
</tr>
</tbody>
</table></div>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[161]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">proj</span> <span class="o">=</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">epsg</span><span class="p">(</span><span class="mi">32662</span><span class="p">)</span>
<span class="n">canada_epsg</span> <span class="o">=</span> <span class="n">canada_gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="mi">32662</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">'projection'</span><span class="p">:</span> <span class="n">proj</span><span class="p">},</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span><span class="o">-</span><span class="mf">140.5</span><span class="p">,</span> <span class="o">-</span><span class="mi">55</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mf">40.5</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">LAKES</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">RIVERS</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeature</span><span class="o">.</span><span class="n">STATES</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_geometries</span><span class="p">(</span><span class="n">gdf_epsg</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">proj</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">'red'</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_geometries</span><span class="p">(</span><span class="n">canada_epsg</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">proj</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">'green'</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">'green'</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">stock_img</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'Attributes with Nvx1=AGR, Nvx3=FOI1'</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/2_real_world_examples_01-accessing-data_31_0.png" src="../_images/2_real_world_examples_01-accessing-data_31_0.png"/>
</div>
</div>
<p><strong>Feel free to experiment with your own datasets!</strong></p>
</section>
</section>
<section id="5.-Indexing/accessing-data-via-STAC">
<h2>5. Indexing/accessing data via STAC<a class="headerlink" href="#5.-Indexing/accessing-data-via-STAC" title="Permalink to this headline">#</a></h2>
<p>In the Introduction to STAC notebook, we looked briefly into what the Spatial Temporal Asset Catalog is and why it is used. In this section we will be working with GEOAnalytics STAC Browser.</p>
<p>We will query Landsat 8 data over a select date range and save the indices to the STAC. Later, we will experiment and retrieve the data using STAC functionality.</p>
<section id="5.1-Query-Landsat-8-Indices">
<h3>5.1 Query Landsat 8 Indices<a class="headerlink" href="#5.1-Query-Landsat-8-Indices" title="Permalink to this headline">#</a></h3>
<p>Let’s use the <code class="docutils literal notranslate"><span class="pre">gcs_landsat8_stac_indexer</span></code> library and query some Landsat 8 data between two dates. We’ll index from the existing file containing Landsat paths and rows, and store the resulting dataframe in a new CSV.</p>
<p><strong>Note:</strong> Data in 2019 has already been added to the STAC server, so try and use another date range.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">gcs_landsat8_stac_indexer2.gcs_landsat8_stac_indexer.query.format</span> <span class="kn">import</span> <span class="n">format_landsat_big_query_index</span>
<span class="kn">from</span> <span class="nn">gcs_landsat8_stac_indexer2.gcs_landsat8_stac_indexer.query.query</span> <span class="kn">import</span> <span class="n">execute_big_query_or_get_dataframe</span>

<span class="k">def</span> <span class="nf">query_gcs_landsat8_index</span><span class="p">(</span><span class="n">path_row_csv_file</span><span class="p">,</span>
    <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="n">service_account_json_path</span><span class="p">,</span> <span class="n">result_csv_path</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">start_date</span> <span class="o">&gt;</span> <span class="n">end_date</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="sa">f</span><span class="s1">'start date </span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s1"> cannot be greater than end date </span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
    <span class="n">path_row_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path_row_csv_file</span><span class="p">)</span>
    <span class="n">query_str</span> <span class="o">=</span> <span class="n">format_landsat_big_query_index</span><span class="p">(</span><span class="n">path_row_df</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="n">end_date</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">execute_big_query_or_get_dataframe</span><span class="p">(</span><span class="n">query_str</span><span class="p">,</span> <span class="n">service_account_json_path</span><span class="o">=</span><span class="n">service_account_json_path</span><span class="p">,</span> <span class="n">results_csv_path</span><span class="o">=</span><span class="n">result_csv_path</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df</span>

</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">query</span> <span class="o">=</span> <span class="n">query_gcs_landsat8_index</span><span class="p">(</span><span class="s1">'gcs_landsat8_stac_indexer2/data/phac_landsat8_pathrow.csv'</span><span class="p">,</span>
                                 <span class="s1">'2019-1-1'</span><span class="p">,</span>
                                 <span class="s1">'2019-12-31'</span><span class="p">,</span>
                                 <span class="s1">'/home/jovyan/geoanalytics_asaini/geoanalytics-canada-bigquery-sa.json'</span><span class="p">,</span>
                                 <span class="s1">'data/test_2021_09_07.csv'</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">query</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<div class="table-wrapper"><table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Unnamed: 0</th>
<th>scene_id</th>
<th>product_id</th>
<th>spacecraft_id</th>
<th>sensor_id</th>
<th>date_acquired</th>
<th>sensing_time</th>
<th>collection_number</th>
<th>collection_category</th>
<th>data_type</th>
<th>wrs_path</th>
<th>wrs_row</th>
<th>cloud_cover</th>
<th>north_lat</th>
<th>south_lat</th>
<th>west_lon</th>
<th>east_lon</th>
<th>total_size</th>
<th>base_url</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>0</td>
<td>LC80010282018347LGN00</td>
<td>LC08_L1TP_001028_20181213_20181227_01_T1</td>
<td>LANDSAT_8</td>
<td>OLI_TIRS</td>
<td>2018-12-13</td>
<td>2018-12-13 14:17:48.048082+00:00</td>
<td>1</td>
<td>T1</td>
<td>L1TP</td>
<td>1</td>
<td>28</td>
<td>38.84</td>
<td>47.12503</td>
<td>44.90713</td>
<td>-54.42085</td>
<td>-51.28018</td>
<td>916072324</td>
<td>gs://gcp-public-data-landsat/LC08/01/001/028/L...</td>
</tr>
<tr>
<th>1</th>
<td>1</td>
<td>LC80010172018347LGN00</td>
<td>LC08_L1TP_001017_20181213_20181227_01_T1</td>
<td>LANDSAT_8</td>
<td>OLI_TIRS</td>
<td>2018-12-13</td>
<td>2018-12-13 14:13:25.356789+00:00</td>
<td>1</td>
<td>T1</td>
<td>L1TP</td>
<td>1</td>
<td>17</td>
<td>70.83</td>
<td>62.56728</td>
<td>60.34080</td>
<td>-47.36221</td>
<td>-42.57559</td>
<td>726089311</td>
<td>gs://gcp-public-data-landsat/LC08/01/001/017/L...</td>
</tr>
<tr>
<th>2</th>
<td>2</td>
<td>LC80010272018347LGN00</td>
<td>LC08_L1TP_001027_20181213_20181227_01_T1</td>
<td>LANDSAT_8</td>
<td>OLI_TIRS</td>
<td>2018-12-13</td>
<td>2018-12-13 14:17:24.161279+00:00</td>
<td>1</td>
<td>T1</td>
<td>L1TP</td>
<td>1</td>
<td>27</td>
<td>70.23</td>
<td>48.53402</td>
<td>46.33515</td>
<td>-53.91857</td>
<td>-50.70199</td>
<td>922557359</td>
<td>gs://gcp-public-data-landsat/LC08/01/001/027/L...</td>
</tr>
<tr>
<th>3</th>
<td>3</td>
<td>LC80010182018347LGN00</td>
<td>LC08_L1TP_001018_20181213_20181227_01_T1</td>
<td>LANDSAT_8</td>
<td>OLI_TIRS</td>
<td>2018-12-13</td>
<td>2018-12-13 14:13:49.235119+00:00</td>
<td>1</td>
<td>T1</td>
<td>L1TP</td>
<td>1</td>
<td>18</td>
<td>76.40</td>
<td>61.20192</td>
<td>58.94219</td>
<td>-48.25572</td>
<td>-43.67509</td>
<td>728052231</td>
<td>gs://gcp-public-data-landsat/LC08/01/001/018/L...</td>
</tr>
<tr>
<th>4</th>
<td>4</td>
<td>LC80010182018363LGN00</td>
<td>LC08_L1TP_001018_20181229_20190130_01_T1</td>
<td>LANDSAT_8</td>
<td>OLI_TIRS</td>
<td>2018-12-29</td>
<td>2018-12-29 14:13:49.848312+00:00</td>
<td>1</td>
<td>T1</td>
<td>L1TP</td>
<td>1</td>
<td>18</td>
<td>10.58</td>
<td>61.20198</td>
<td>58.94207</td>
<td>-48.26128</td>
<td>-43.68067</td>
<td>803405432</td>
<td>gs://gcp-public-data-landsat/LC08/01/001/018/L...</td>
</tr>
<tr>
<th>...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<th>13165</th>
<td>13165</td>
<td>LC80430142018289LGN00</td>
<td>LC08_L1TP_043014_20181016_20181030_01_T1</td>
<td>LANDSAT_8</td>
<td>OLI_TIRS</td>
<td>2018-10-16</td>
<td>2018-10-16 18:31:47.078931+00:00</td>
<td>1</td>
<td>T1</td>
<td>L1TP</td>
<td>43</td>
<td>14</td>
<td>42.61</td>
<td>66.72965</td>
<td>64.38729</td>
<td>-109.38680</td>
<td>-103.63667</td>
<td>901765185</td>
<td>gs://gcp-public-data-landsat/LC08/01/043/014/L...</td>
</tr>
<tr>
<th>13166</th>
<td>13166</td>
<td>LC82330182018276LGN00</td>
<td>LC08_L1TP_233018_20181003_20181010_01_T1</td>
<td>LANDSAT_8</td>
<td>OLI_TIRS</td>
<td>2018-10-03</td>
<td>2018-10-03 14:07:31.865070+00:00</td>
<td>1</td>
<td>T1</td>
<td>L1TP</td>
<td>233</td>
<td>18</td>
<td>6.90</td>
<td>61.18246</td>
<td>58.96030</td>
<td>-46.62726</td>
<td>-42.09848</td>
<td>851993019</td>
<td>gs://gcp-public-data-landsat/LC08/01/233/018/L...</td>
</tr>
<tr>
<th>13167</th>
<td>13167</td>
<td>LC82330172018292LGN00</td>
<td>LC08_L1TP_233017_20181019_20181031_01_T2</td>
<td>LANDSAT_8</td>
<td>OLI_TIRS</td>
<td>2018-10-19</td>
<td>2018-10-19 14:07:14.344983+00:00</td>
<td>1</td>
<td>T2</td>
<td>L1TP</td>
<td>233</td>
<td>17</td>
<td>64.06</td>
<td>62.57988</td>
<td>60.32965</td>
<td>-45.73961</td>
<td>-41.01554</td>
<td>941856720</td>
<td>gs://gcp-public-data-landsat/LC08/01/233/017/L...</td>
</tr>
<tr>
<th>13168</th>
<td>13168</td>
<td>LC82330172018276LGN00</td>
<td>LC08_L1TP_233017_20181003_20181010_01_T1</td>
<td>LANDSAT_8</td>
<td>OLI_TIRS</td>
<td>2018-10-03</td>
<td>2018-10-03 14:07:07.986739+00:00</td>
<td>1</td>
<td>T1</td>
<td>L1TP</td>
<td>233</td>
<td>17</td>
<td>10.13</td>
<td>62.57994</td>
<td>60.32935</td>
<td>-45.72794</td>
<td>-41.00391</td>
<td>882028981</td>
<td>gs://gcp-public-data-landsat/LC08/01/233/017/L...</td>
</tr>
<tr>
<th>13169</th>
<td>13169</td>
<td>LC82330182018292LGN00</td>
<td>LC08_L1TP_233018_20181019_20181031_01_T1</td>
<td>LANDSAT_8</td>
<td>OLI_TIRS</td>
<td>2018-10-19</td>
<td>2018-10-19 14:07:38.227551+00:00</td>
<td>1</td>
<td>T1</td>
<td>L1TP</td>
<td>233</td>
<td>18</td>
<td>37.60</td>
<td>61.18233</td>
<td>58.95793</td>
<td>-46.63841</td>
<td>-42.11518</td>
<td>959104882</td>
<td>gs://gcp-public-data-landsat/LC08/01/233/018/L...</td>
</tr>
</tbody>
</table></div>
<p>13170 rows × 19 columns</p>
</div></div>
</div>
</section>
<section id="5.2-Save-Landsat-8-Indices">
<h3>5.2 Save Landsat 8 Indices<a class="headerlink" href="#5.2-Save-Landsat-8-Indices" title="Permalink to this headline">#</a></h3>
<p>Once we have our file with the Landsat 8 Data and it’s metadata, we need to add it to the STAC server so it can be used whenever.</p>
<p>The function to save the Landsat 8 data requires the <code class="docutils literal notranslate"><span class="pre">gcs_landsat8_stac_indexer</span></code> library, the URL to the the geoanalytics STAC browser, <a class="reference external" href="https://stac.geoanalytics.ca">https://stac.geoanalytics.ca</a>, your API Token, and the path to the saved CSV file.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">API_TOKEN</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Please copy and paste your API Access Token here: "</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">gcs_landsat8_stac_indexer2.gcs_landsat8_stac_indexer.stac.landsat8</span> <span class="kn">import</span> <span class="n">Landsat8StacIndexer</span>
<span class="kn">from</span> <span class="nn">rasterindexlib.stac.client</span> <span class="kn">import</span> <span class="n">StacClient</span>

<span class="n">ERROR_TOLERANCE</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">NOTIFICATION_INCREMENT</span> <span class="o">=</span> <span class="mi">1000</span>

<span class="k">def</span> <span class="nf">save_landsat8_indices_to_stac</span><span class="p">(</span><span class="n">stac_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">auth_token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path_row_csv_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">result_csv_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">path_row_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path_row_csv_file</span><span class="p">)</span>
    <span class="n">l8_result_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">result_csv_path</span><span class="p">)</span>
    <span class="n">l8_indexer</span> <span class="o">=</span> <span class="n">Landsat8StacIndexer</span><span class="p">(</span><span class="n">path_row_df</span><span class="p">)</span>

    <span class="n">s</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
    <span class="n">s</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">'cookie'</span><span class="p">:</span> <span class="n">auth_token</span><span class="p">})</span>
    <span class="n">stac_client</span> <span class="o">=</span> <span class="n">StacClient</span><span class="p">(</span><span class="n">stac_url</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="n">s</span><span class="p">)</span>

    <span class="n">error_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'begin indexing, </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">l8_result_df</span><span class="p">)</span><span class="si">}</span><span class="s1"> items found'</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">l8_result_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">%</span> <span class="n">NOTIFICATION_INCREMENT</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'saved </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1"> items'</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">_save_row</span><span class="p">(</span><span class="n">stac_client</span><span class="p">,</span> <span class="n">l8_indexer</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">error_count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Exception #</span><span class="si">{</span><span class="n">error_count</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">row</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">error_count</span> <span class="o">&gt;</span> <span class="n">ERROR_TOLERANCE</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">'Encountered too many exceptions'</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">'finished'</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_save_row</span><span class="p">(</span><span class="n">stac_client</span><span class="p">:</span> <span class="n">StacClient</span><span class="p">,</span> <span class="n">l8_indexer</span><span class="p">:</span> <span class="n">Landsat8StacIndexer</span><span class="p">,</span> <span class="n">row</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
    <span class="n">stac_item</span> <span class="o">=</span> <span class="n">l8_indexer</span><span class="o">.</span><span class="n">create_landsat8_stac_item</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
    <span class="n">stac_client</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">stac_item</span><span class="o">.</span><span class="n">collection_id</span><span class="p">,</span> <span class="n">stac_item</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>


</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">stac_save</span> <span class="o">=</span> <span class="n">save_landsat8_indices_to_stac</span><span class="p">(</span><span class="s1">'https://stac.geoanalytics.ca'</span><span class="p">,</span>
                                          <span class="n">API_TOKEN</span><span class="p">,</span>
                                          <span class="s1">'gcs_landsat8_stac_indexer2/data/phac_landsat8_pathrow.csv'</span><span class="p">,</span>
                                          <span class="s1">'data/test_2021_09_07.csv'</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
begin indexing, 12989 items found
saved 1000 items
saved 2000 items
!!error occurred https://stac.geoanalytics.ca/collections/landsat-8-l1/items 500
Exception #1: 500 Server Error: Internal Server Error for url: https://stac.geoanalytics.ca/collections/landsat-8-l1/items Unnamed: 0                                                          2372
scene_id                                           LC80090282019070LGN00
product_id                      LC08_L1TP_009028_20190311_20190325_01_T2
spacecraft_id                                                  LANDSAT_8
sensor_id                                                       OLI_TIRS
date_acquired                                                 2019-03-11
sensing_time                            2019-03-11 15:06:59.768351+00:00
collection_number                                                      1
collection_category                                                   T2
data_type                                                           L1TP
wrs_path                                                               9
wrs_row                                                               28
cloud_cover                                                        50.98
north_lat                                                        47.1316
south_lat                                                        44.9013
west_lon                                                        -66.8039
east_lon                                                        -63.6377
total_size                                                    1086950842
base_url               gs://gcp-public-data-landsat/LC08/01/009/028/L...
Name: 2372, dtype: object
saved 3000 items
saved 4000 items
saved 5000 items
saved 6000 items
saved 7000 items
saved 8000 items
saved 9000 items
saved 10000 items
saved 11000 items
saved 12000 items
finished
</pre></div></div>
</div>
<p>As you can see from the printed outputs above, every 1000 items sent over are written to the console.</p>
</section>
<section id="5.3-Accessing-the-Landsat-8-Data">
<h3>5.3 Accessing the Landsat 8 Data<a class="headerlink" href="#5.3-Accessing-the-Landsat-8-Data" title="Permalink to this headline">#</a></h3>
<p>The next part will experiment with techniques of retrieving the items from STAC.</p>
<p>Since we are requesting data over the Hypertext Transfer Protocol (HTTP), which works as a request-response protocol between a client and server, let’s understand two types of methods over HTTP.</p>
<ul class="simple">
<li><p><strong>GET is used to request data from a specified resource (URL).</strong></p>
<ul>
<li><p>can be cached.</p></li>
<li><p>remain in the browser history.</p></li>
<li><p>have length restrictions.</p></li>
<li><p>only used to request data and not modify data.</p></li>
</ul>
</li>
<li><p><strong>POST sends data to a server to create a resource.</strong></p>
<ul>
<li><p>never cached</p></li>
<li><p>do not remain in the browser history</p></li>
<li><p>have no restrictions on data length</p></li>
</ul>
</li>
<li><p><strong>PUT is used to update a resource.</strong></p></li>
</ul>
<p>The function below uses the GET search method to collect data in a given collection with specified path and row over the <a class="reference external" href="https://stac.geoanalytics.ca/">https://stac.geoanalytics.ca/</a> URL.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[144]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">get_query</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">auth_token</span><span class="p">):</span>
    <span class="n">all_data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">url_template</span> <span class="o">=</span> <span class="s1">'https://stac.geoanalytics.ca/search?collections=</span><span class="si">{collection}</span><span class="s1">&amp;query={{"landsat:wrs_row":{{"eq":</span><span class="si">{row}</span><span class="s1">}},"landsat:wrs_path":{{"eq":</span><span class="si">{path}</span><span class="s1">}}}}&amp;limit=</span><span class="si">{limit}</span><span class="s1">'</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s1">'cookie'</span><span class="p">:</span> <span class="n">auth_token</span><span class="p">}</span>

    <span class="n">url</span> <span class="o">=</span> <span class="n">url_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">collection</span><span class="o">=</span><span class="n">collection</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="n">row</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">json_response</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">json_response</span><span class="p">[</span><span class="s1">'features'</span><span class="p">]:</span>
        <span class="n">all_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">all_data</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[147]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">get_df</span> <span class="o">=</span> <span class="n">get_query</span><span class="p">(</span><span class="s1">'landsat-8-l1'</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">API_TOKEN</span><span class="p">)</span>
<span class="n">get_df</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[147]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<div class="table-wrapper"><table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>id</th>
<th>bbox</th>
<th>type</th>
<th>links</th>
<th>assets</th>
<th>geometry</th>
<th>collection</th>
<th>properties</th>
<th>stac_version</th>
<th>stac_extensions</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>LC08_L1GT_011031_20191120_20191203_01_T2</td>
<td>[-71.21124, 40.66617, -68.34913, 42.82692]</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-71.1341...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2019-11-20T15:21:15Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>1</th>
<td>LC08_L1TP_011031_20191104_20191115_01_T1</td>
<td>[-71.22224, 40.66598, -68.36014, 42.82698]</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-71.1341...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2019-11-04T15:21:18Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>2</th>
<td>LC08_L1TP_011031_20191019_20191029_01_T1</td>
<td>[-71.22591, 40.66591, -68.36381, 42.827]</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-71.1341...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2019-10-19T15:21:19Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>3</th>
<td>LC08_L1GT_011031_20191003_20191018_01_T2</td>
<td>[-71.22224, 40.66598, -68.36014, 42.82698]</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-71.1341...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2019-10-03T15:21:17Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>4</th>
<td>LC08_L1TP_011031_20181219_20181227_01_T1</td>
<td>[-71.21124, 40.66617, -68.34546, 42.8269]</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-71.1341...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2018-12-19T15:20:48Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>5</th>
<td>LC08_L1TP_011031_20181203_20181211_01_T1</td>
<td>[-71.21857, 40.66604, -68.35647, 42.82696]</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-71.1341...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2018-12-03T15:20:50Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>6</th>
<td>LC08_L1TP_011031_20180930_20181010_01_T1</td>
<td>[-71.21124, 40.66617, -68.34913, 42.82692]</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-71.1341...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2018-09-30T15:20:39Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>7</th>
<td>LC08_L1TP_011031_20180914_20180928_01_T1</td>
<td>[-71.20391, 40.666309999999996, -68.3381199999...</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-71.1341...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2018-09-14T15:20:33Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>8</th>
<td>LC08_L1TP_011031_20180829_20180911_01_T1</td>
<td>[-71.20391, 40.666309999999996, -68.34179, 42....</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-71.1341...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2018-08-29T15:20:28Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>9</th>
<td>LC08_L1GT_011031_20180813_20180828_01_T2</td>
<td>[-71.20391, 40.666309999999996, -68.3381199999...</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-71.1341...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2018-08-13T15:20:21Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>10</th>
<td>LC08_L1GT_011031_20180322_20180403_01_T2</td>
<td>[-71.22957, 40.66854, -68.36748, 42.8270200000...</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-71.1341...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2018-03-22T15:20:27Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>11</th>
<td>LC08_L1GT_011031_20180306_20180319_01_T2</td>
<td>[-71.22591, 40.66591, -68.36381, 42.827]</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-71.1341...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2018-03-06T15:20:35Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
</tbody>
</table></div>
</div></div>
</div>
<p>The returned dataframe contained important values of the data such as the Scene ID, geometry, item properties and the Links to the bands of the images.</p>
<p>Another way to retrieve data is by using the HTTP POST Search method. For this example, let’s retrieve all Landsat 8 L1 data within the Canada polygon (used in the previous section), returning the first 100 items.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">import</span> <span class="nn">shapely</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s1">'/home/jovyan/geoanalytics_asaini/tutorial_notebooks/getting_started/data/canada.shp'</span><span class="p">)</span>
<span class="n">polygon</span> <span class="o">=</span> <span class="n">shapely</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">mapping</span><span class="p">(</span><span class="n">gdf</span><span class="o">.</span><span class="n">geometry</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">gdf</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<div class="table-wrapper"><table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>location</th>
<th>geometry</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>Canada</td>
<td>POLYGON ((-141.12089 69.53452, -128.83087 70.1...</td>
</tr>
</tbody>
</table></div>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">polygon</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{'type': 'Polygon',
 'coordinates': (((-141.120889, 69.534518),
   (-128.830872, 70.140364),
   (-78.891274, 83.480366),
   (-57.78344, 82.494824),
   (-77.493945, 75.095633),
   (-60.282758, 66.618122),
   (-51.964095, 46.55886),
   (-65.859763, 43.004647),
   (-67.904183, 46.679594),
   (-83.176974, 41.804078),
   (-83.968518, 45.920587),
   (-95.338529, 48.283193),
   (-126.273476, 48.283193),
   (-141.120889, 59.888937),
   (-141.120889, 69.534518)),)}
</pre></div></div>
</div>
<p>The POST method uses a dictionary format which is JSON Serializable, where the keys are the parameter names, and the values are the specified description.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">post_query</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">polygon</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">auth_token</span><span class="p">):</span>
    <span class="n">all_data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s1">'https://stac.geoanalytics.ca/search'</span>
    <span class="n">query</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"collections"</span><span class="p">:</span> <span class="p">[</span><span class="n">collection</span><span class="p">],</span>
             <span class="s2">"intersects"</span><span class="p">:</span> <span class="n">polygon</span><span class="p">,</span>
             <span class="s2">"limit"</span><span class="p">:</span> <span class="n">limit</span><span class="p">}</span>

    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s1">'cookie'</span><span class="p">:</span> <span class="n">auth_token</span><span class="p">}</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">json_response</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">json_response</span><span class="p">[</span><span class="s1">'features'</span><span class="p">]:</span>
        <span class="n">all_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">all_data</span><span class="p">,</span> <span class="p">)</span>
    <span class="k">return</span> <span class="n">df</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">post_df</span> <span class="o">=</span> <span class="n">post_query</span><span class="p">(</span><span class="s1">'landsat-8-l1'</span><span class="p">,</span> <span class="n">polygon</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="n">API_TOKEN</span><span class="p">)</span>
<span class="n">post_df</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<div class="table-wrapper"><table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>id</th>
<th>bbox</th>
<th>type</th>
<th>links</th>
<th>assets</th>
<th>geometry</th>
<th>collection</th>
<th>properties</th>
<th>stac_version</th>
<th>stac_extensions</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>LC08_L1GT_033027_20191130_20191216_01_T2</td>
<td>[-103.41654, 46.304390000000005, -100.11828, 4...</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-103.240...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2019-11-30T17:35:37Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>1</th>
<td>LC08_L1GT_033026_20191130_20191216_01_T2</td>
<td>[-102.88906, 47.729009999999995, -99.52336, 49...</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-102.723...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2019-11-30T17:35:13Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>2</th>
<td>LC08_L1GT_033025_20191130_20191216_01_T2</td>
<td>[-102.33617, 49.15159, -98.89511, 51.3783]</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-102.152...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2019-11-30T17:34:49Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>3</th>
<td>LC08_L1GT_033024_20191130_20191216_01_T2</td>
<td>[-101.75884, 50.5744, -98.2113, 52.7783]</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-101.614...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2019-11-30T17:34:26Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>4</th>
<td>LC08_L1GT_033023_20191130_20191216_01_T2</td>
<td>[-101.14912, 51.991820000000004, -97.486280000...</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-99.6658...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2019-11-30T17:34:02Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<th>195</th>
<td>LC08_L1TP_032016_20191123_20191203_01_T1</td>
<td>[-94.29034, 61.70101, -89.28421999999999, 63.9...</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-94.1353...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2019-11-23T17:25:04Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>196</th>
<td>LC08_L1TP_032015_20191123_20191203_01_T1</td>
<td>[-93.22989, 63.05246999999999, -87.97575, 65.3...</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-93.1256...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2019-11-23T17:24:40Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>197</th>
<td>LC08_L1TP_016030_20191123_20191203_01_T1</td>
<td>[-78.52939, 42.064890000000005, -75.5467599999...</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-78.4132...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2019-11-23T15:51:45Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>198</th>
<td>LC08_L1TP_016029_20191123_20191203_01_T1</td>
<td>[-78.06365, 43.495709999999995, -75.02475, 45....</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-77.9514...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2019-11-23T15:51:21Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
<tr>
<th>199</th>
<td>LC08_L1TP_016028_20191123_20191203_01_T1</td>
<td>[-77.57529, 44.92496, -74.46096, 47.10524]</td>
<td>Feature</td>
<td>[{'rel': 'collection', 'type': 'application/js...</td>
<td>{'B1': {'href': 'https://storage.googleapis.co...</td>
<td>{'type': 'Polygon', 'coordinates': [[[-77.4727...</td>
<td>landsat-8-l1</td>
<td>{'datetime': '2019-11-23T15:50:57Z', 'eo:bands...</td>
<td>1.0.0-beta.2</td>
<td>[eo, landsat]</td>
</tr>
</tbody>
</table></div>
<p>200 rows × 10 columns</p>
</div></div>
</div>
<p>Now, here are two additional functions to format the input dataframe and return a dataframe with only the product ID, image creation date, and the URL to the desired bands of the image.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">format_dataframe</span><span class="p">(</span><span class="n">pids</span><span class="p">,</span> <span class="n">assets</span><span class="p">,</span> <span class="n">bands_to_use</span><span class="p">):</span>
    <span class="n">dates</span> <span class="o">=</span> <span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'_'</span><span class="p">)[</span><span class="mi">3</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pids</span><span class="p">]</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">product_id</span><span class="o">=</span><span class="n">pids</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">dates</span><span class="p">))</span>
    <span class="n">bands</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="n">bands_to_use</span><span class="p">:</span>
        <span class="n">band_links</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">asset</span> <span class="ow">in</span> <span class="n">assets</span><span class="p">:</span>
             <span class="n">band_links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">asset</span><span class="p">[</span><span class="n">band</span><span class="p">][</span><span class="s1">'href'</span><span class="p">])</span>
        <span class="n">df</span><span class="p">[</span><span class="n">band</span><span class="p">]</span><span class="o">=</span><span class="n">band_links</span>

    <span class="k">return</span> <span class="n">df</span>

<span class="k">def</span> <span class="nf">format_dataframe_T1</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">bands_to_use</span><span class="p">):</span>
    <span class="n">T1</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'_T1'</span><span class="p">):</span>
            <span class="n">T1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

    <span class="n">df_T1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">T1</span><span class="p">)</span>
    <span class="n">pids</span> <span class="o">=</span> <span class="n">df_T1</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">format_dataframe</span><span class="p">(</span><span class="n">pids</span><span class="p">,</span> <span class="n">df_T1</span><span class="o">.</span><span class="n">assets</span><span class="p">,</span> <span class="n">bands_to_use</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">post_df</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">rgb_df</span> <span class="o">=</span> <span class="n">format_dataframe_T1</span><span class="p">(</span><span class="n">post_df</span><span class="p">,</span> <span class="p">[</span><span class="s1">'B2'</span><span class="p">,</span><span class="s1">'B3'</span><span class="p">,</span><span class="s1">'B4'</span><span class="p">])</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'OAuth token is invalid. Update it in create_dataframe()'</span><span class="p">)</span>

<span class="n">rgb_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<div class="table-wrapper"><table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>product_id</th>
<th>date</th>
<th>B2</th>
<th>B3</th>
<th>B4</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>LC08_L1TP_033021_20191130_20191216_01_T1</td>
<td>2019-11-30</td>
<td>https://storage.googleapis.com/gcp-public-data...</td>
<td>https://storage.googleapis.com/gcp-public-data...</td>
<td>https://storage.googleapis.com/gcp-public-data...</td>
</tr>
<tr>
<th>1</th>
<td>LC08_L1TP_033020_20191130_20191216_01_T1</td>
<td>2019-11-30</td>
<td>https://storage.googleapis.com/gcp-public-data...</td>
<td>https://storage.googleapis.com/gcp-public-data...</td>
<td>https://storage.googleapis.com/gcp-public-data...</td>
</tr>
<tr>
<th>2</th>
<td>LC08_L1TP_017030_20191130_20191216_01_T1</td>
<td>2019-11-30</td>
<td>https://storage.googleapis.com/gcp-public-data...</td>
<td>https://storage.googleapis.com/gcp-public-data...</td>
<td>https://storage.googleapis.com/gcp-public-data...</td>
</tr>
<tr>
<th>3</th>
<td>LC08_L1TP_017029_20191130_20191216_01_T1</td>
<td>2019-11-30</td>
<td>https://storage.googleapis.com/gcp-public-data...</td>
<td>https://storage.googleapis.com/gcp-public-data...</td>
<td>https://storage.googleapis.com/gcp-public-data...</td>
</tr>
<tr>
<th>4</th>
<td>LC08_L1TP_017028_20191130_20191216_01_T1</td>
<td>2019-11-30</td>
<td>https://storage.googleapis.com/gcp-public-data...</td>
<td>https://storage.googleapis.com/gcp-public-data...</td>
<td>https://storage.googleapis.com/gcp-public-data...</td>
</tr>
</tbody>
</table></div>
</div></div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="02-ndvi-s2-dask.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><strong>NDVI with Sentinel-2 and Dask</strong></div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Real World Examples</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Hatfield Consultants
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#"><strong>Accessing and Downloading Data</strong></a><ul>
<li><a class="reference internal" href="#1.-Location-of-the-GEOAnalytics-folders">1. Location of the GEOAnalytics folders</a></li>
<li><a class="reference internal" href="#2.-Accessing-the-Public-Data-Buckets-in-JupyterHub">2. Accessing the Public Data Buckets in JupyterHub</a><ul>
<li><a class="reference internal" href="#2.1-Sentinel-2-Files">2.1 Sentinel-2 Files</a></li>
<li><a class="reference internal" href="#2.2-Landsat-Files">2.2 Landsat Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#3.-Downloading-Data-that-is-not-Available-in-GEOAnalytics">3. Downloading Data that is not Available in GEOAnalytics</a><ul>
<li><a class="reference internal" href="#3.1-SentinelHub">3.1 SentinelHub</a></li>
<li><a class="reference internal" href="#3.2-NASA-CMR">3.2 NASA CMR</a></li>
</ul>
</li>
<li><a class="reference internal" href="#4.-Ground-Truth-Collection">4. Ground Truth Collection</a><ul>
<li><a class="reference internal" href="#4.1-Working-with-Existing-Data">4.1 Working with Existing Data</a></li>
<li><a class="reference internal" href="#4.2-Uploading-New-Data">4.2 Uploading New Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#5.-Indexing/accessing-data-via-STAC">5. Indexing/accessing data via STAC</a><ul>
<li><a class="reference internal" href="#5.1-Query-Landsat-8-Indices">5.1 Query Landsat 8 Indices</a></li>
<li><a class="reference internal" href="#5.2-Save-Landsat-8-Indices">5.2 Save Landsat 8 Indices</a></li>
<li><a class="reference internal" href="#5.3-Accessing-the-Landsat-8-Data">5.3 Accessing the Landsat 8 Data</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/tabs.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>